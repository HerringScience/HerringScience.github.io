for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 6)
print(FatData1 %>%
ggplot(aes(x=Lon, y=Lat)) +
geom_polygon(data=polysT,aes(x=X, y=Y, group=Box, fill = Box), colour = "black") +
geom_point(data=subset(FatData1, Lat < 46 & Lat > 40 & Year == i), aes(color=Fat)) +
scale_color_viridis_c(direction=-1) +
geom_polygon(data=out,aes(x=long, y=lat, group=group)) +
coord_map() +
theme(legend.position = 'bottom'))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 7)
print(FatData1 %>%
ggplot(aes(x=Lon, y=Lat)) +
geom_polygon(data=polysT,aes(x=X, y=Y, group=Box, fill = Box), colour = "black") +
geom_point(data=subset(FatData1, Lat < 46 & Lat > 40 & Year == i), aes(color=Fat)) +
scale_color_viridis_c(direction=-1) +
geom_polygon(data=out,aes(x=long, y=lat, group=group)) +
coord_map() +
theme(legend.position = 'bottom'))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 8)
print(FatData1 %>%
ggplot(aes(x=Lon, y=Lat)) +
geom_polygon(data=polysT,aes(x=X, y=Y, group=Box, fill = Box), colour = "black") +
geom_point(data=subset(FatData1, Lat < 46 & Lat > 40 & Year == i), aes(color=Fat)) +
scale_color_viridis_c(direction=-1) +
geom_polygon(data=out,aes(x=long, y=lat, group=group)) +
coord_map() +
theme(legend.position = 'bottom'))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 9)
print(FatData1 %>%
ggplot(aes(x=Lon, y=Lat)) +
geom_polygon(data=polysT,aes(x=X, y=Y, group=Box, fill = Box), colour = "black") +
geom_point(data=subset(FatData1, Lat < 46 & Lat > 40 & Year == i), aes(color=Fat)) +
scale_color_viridis_c(direction=-1) +
geom_polygon(data=out,aes(x=long, y=lat, group=group)) +
coord_map() +
theme(legend.position = 'bottom'))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 10)
print(FatData1 %>%
ggplot(aes(x=Lon, y=Lat)) +
geom_polygon(data=polysT,aes(x=X, y=Y, group=Box, fill = Box), colour = "black") +
geom_point(data=subset(FatData1, Lat < 46 & Lat > 40 & Year == i), aes(color=Fat)) +
scale_color_viridis_c(direction=-1) +
geom_polygon(data=out,aes(x=long, y=lat, group=group)) +
coord_map() +
theme(legend.position = 'bottom'))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 11)
print(FatData1 %>%
ggplot(aes(x=Lon, y=Lat)) +
geom_polygon(data=polysT,aes(x=X, y=Y, group=Box, fill = Box), colour = "black") +
geom_point(data=subset(FatData1, Lat < 46 & Lat > 40 & Year == i), aes(color=Fat)) +
scale_color_viridis_c(direction=-1) +
geom_polygon(data=out,aes(x=long, y=lat, group=group)) +
coord_map() +
theme(legend.position = 'bottom'))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 12)
print(FatData1 %>%
ggplot(aes(x=Lon, y=Lat)) +
geom_polygon(data=polysT,aes(x=X, y=Y, group=Box, fill = Box), colour = "black") +
geom_point(data=subset(FatData1, Lat < 46 & Lat > 40 & Year == i), aes(color=Fat)) +
scale_color_viridis_c(direction=-1) +
geom_polygon(data=out,aes(x=long, y=lat, group=group)) +
coord_map() +
theme(legend.position = 'bottom'))
cat("\n")
}
library(scales)
FatData %>%
filter(!is.na(Lat)) %>%
mutate(Lat = format(round(Lat, 1), nsmall = 1)) %>%
ggplot(aes(x=Fat, y=Lat, group = Lat, fill = Lat)) +
geom_density_ridges(rel_min_height = 0.01) +
theme(legend.position = "none") +
labs(y="Latitude", x="Fat Percentage (%)")
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 1) %>% filter(!is.na(Lat))
FatData1 = order(FatData1$Year)
print(FatData1 %>%
filter(Year == i) %>%
mutate(Lat = format(round(Lat, 1), nsmall = 1)) %>%
ggplot(aes(x=Fat, y=Lat, group = Lat, fill = Lat)) +
geom_density_ridges(rel_min_height = 0.01) +
theme(legend.position = "none") +
labs(y="Latitude", x="Fat Percentage (%)"))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 1) %>% filter(!is.na(Lat))
#FatData1 = order(FatData1$Year)
print(FatData1 %>%
filter(Year == i) %>%
mutate(Lat = format(round(Lat, 1), nsmall = 1)) %>%
ggplot(aes(x=Fat, y=Lat, group = Lat, fill = Lat)) +
geom_density_ridges(rel_min_height = 0.01) +
theme(legend.position = "none") +
labs(y="Latitude", x="Fat Percentage (%)"))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 1) %>% filter(!is.na(Lat))
#FatData1 = order(FatData1$Year)
print(FatData1 %>%
filter(Year == i) %>%
order(Year) %>%
mutate(Lat = format(round(Lat, 1), nsmall = 1)) %>%
ggplot(aes(x=Fat, y=Lat, group = Lat, fill = Lat)) +
geom_density_ridges(rel_min_height = 0.01) +
theme(legend.position = "none") +
labs(y="Latitude", x="Fat Percentage (%)"))
cat("\n")
}
FatData1 = reorder(FatData1, my(Year))
FatData1 = as.Date.numeric(FatData1$Year)
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 1) %>% filter(!is.na(Lat))
FatData1 = as.Date.numeric(FatData1$Year)
print(FatData1 %>%
filter(Year == i) %>%
mutate(Lat = format(round(Lat, 1), nsmall = 1)) %>%
ggplot(aes(x=Fat, y=Lat, group = Lat, fill = Lat)) +
geom_density_ridges(rel_min_height = 0.01) +
theme(legend.position = "none") +
labs(y="Latitude", x="Fat Percentage (%)"))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 1) %>% filter(!is.na(Lat))
FatData1 = as.numeric(FatData1$Year)
print(FatData1 %>%
filter(Year == i) %>%
mutate(Lat = format(round(Lat, 1), nsmall = 1)) %>%
ggplot(aes(x=Fat, y=Lat, group = Lat, fill = Lat)) +
geom_density_ridges(rel_min_height = 0.01) +
theme(legend.position = "none") +
labs(y="Latitude", x="Fat Percentage (%)"))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 1) %>% filter(!is.na(Lat))
print(FatData1 %>%
filter(Year == i) %>%
mutate(Lat = format(round(Lat, 1), nsmall = 1)) %>%
ggplot(aes(x=Fat, y=Lat, group = Lat, fill = Lat)) +
geom_density_ridges(rel_min_height = 0.01) +
theme(legend.position = "none") +
labs(y="Latitude", x="Fat Percentage (%)"))
cat("\n")
}
FatData = order(FatData$Year)
#Fat Data
FatData = read_csv("Total Fat Data.csv")
#Import all packages, CTD data, and land data
#Packages
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Main Data/"))
library(ggplot2)
library(scales)
library(cli)
library(lubridate)
library(reprex)
library(tidyverse)
library(geosphere)
library(reshape2)
library(moderndive)
library(skimr)
library(ggridges)
#library(weathercan)
library(GGally)
library(psych)
library(raster)
library(PBSmapping)
#library(rgeos)
library(sf)
library(terra)
library(knitr)
library(kableExtra)
library(grid)
library(gridExtra)
library(cowplot)
library(DT)
library(dygraphs)
library(leaflet)
library(rmapshaper)
library(plotly)
library(mapproj)
library(oce) #new CTD Data package
#Tagging Data
Tag = read_csv("TaggingEvents.csv") #Tagging Data
polysT = read_csv("timGrounds.csv") #Coloured ground maps
Tag$Year = as.factor(Tag$Year)
Tag$Vessel = as.factor(Tag$Vessel)
Tag$Survey = as.factor(Tag$Survey)
Tag$Tagger = as.factor(Tag$Tagger)
#CTD Data
SST = read_csv("CTD SST.csv") #SST
polysT = read_csv("timGrounds.csv") #coloured ground maps
CTD = read_csv("CTD Full.csv") #All Data
atDepth = read_csv("CTD 30m.csv") #At 30m Depth > This one contains all Stratified Temp + Salinity data as well
SST$Year <- as.factor(SST$Year)
SST$Month <- as.factor(SST$Month)
atDepth$Year <- as.factor(atDepth$Year)
atDepth$Month <- as.factor(atDepth$Month)
CTD$Year <- as.factor(CTD$Year)
CTD$Month <- as.factor(CTD$Month)
CTD$Survey <- as.factor(CTD$Survey)
CTD <- CTD %>%
mutate(Julian_factor = Julian)
CTD$Julian_factor <- as.factor(CTD$Julian_factor)
#SSB Data
SSB = read_csv("SSB Estimates.csv")
SSB$Year <- as.factor(SSB$Year)
SSB$Survey_Number <- as.factor(SSB$Survey_Number)
SSB$Ground <- as.factor(SSB$Ground)
#LRP Data
LRP2 = read_csv("LRP Data.csv")
LRP2 = LRP2 %>% rename(ThreeYear = "3yr Avg")
#Fat Data
FatData = read_csv("Total Fat Data.csv")
FatData = order(FatData$Year)
#Larval Data
Larval = read_csv("Full Larval.csv")
Larval$Year <- as.factor(Larval$Year)
Larval$category <- as.factor(Larval$category)
Larval$Survey.No <- as.factor(Larval$Survey.No)
LarvalSI = filter(Larval, Ground == "SI")
#Land Data
can<-getData('GADM', country="CAN", level=1)
us = getData('GADM', country = "USA", level = 1)
can1 = rbind(can,us)
NBNS <- can1[can1@data$NAME_1%in%c("New Brunswick","Nova Scotia","Prince Edward Island","Newfoundland and Labrador","Québec", "Maine"),]
View(FatData1)
#Fat Data
FatData = read_csv("Total Fat Data.csv")
FatData = order(FatData$Year)
#Import all packages, CTD data, and land data
#Packages
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Main Data/"))
library(ggplot2)
library(scales)
library(cli)
library(lubridate)
library(reprex)
library(tidyverse)
library(geosphere)
library(reshape2)
library(moderndive)
library(skimr)
library(ggridges)
#library(weathercan)
library(GGally)
library(psych)
library(raster)
library(PBSmapping)
#library(rgeos)
library(sf)
library(terra)
library(knitr)
library(kableExtra)
library(grid)
library(gridExtra)
library(cowplot)
library(DT)
library(dygraphs)
library(leaflet)
library(rmapshaper)
library(plotly)
library(mapproj)
library(oce) #new CTD Data package
#Tagging Data
Tag = read_csv("TaggingEvents.csv") #Tagging Data
polysT = read_csv("timGrounds.csv") #Coloured ground maps
Tag$Year = as.factor(Tag$Year)
Tag$Vessel = as.factor(Tag$Vessel)
Tag$Survey = as.factor(Tag$Survey)
Tag$Tagger = as.factor(Tag$Tagger)
#CTD Data
SST = read_csv("CTD SST.csv") #SST
polysT = read_csv("timGrounds.csv") #coloured ground maps
CTD = read_csv("CTD Full.csv") #All Data
atDepth = read_csv("CTD 30m.csv") #At 30m Depth > This one contains all Stratified Temp + Salinity data as well
SST$Year <- as.factor(SST$Year)
SST$Month <- as.factor(SST$Month)
atDepth$Year <- as.factor(atDepth$Year)
atDepth$Month <- as.factor(atDepth$Month)
CTD$Year <- as.factor(CTD$Year)
CTD$Month <- as.factor(CTD$Month)
CTD$Survey <- as.factor(CTD$Survey)
CTD <- CTD %>%
mutate(Julian_factor = Julian)
CTD$Julian_factor <- as.factor(CTD$Julian_factor)
#SSB Data
SSB = read_csv("SSB Estimates.csv")
SSB$Year <- as.factor(SSB$Year)
SSB$Survey_Number <- as.factor(SSB$Survey_Number)
SSB$Ground <- as.factor(SSB$Ground)
#LRP Data
LRP2 = read_csv("LRP Data.csv")
LRP2 = LRP2 %>% rename(ThreeYear = "3yr Avg")
#Fat Data
FatData = read_csv("Total Fat Data.csv")
FatData = order(FatData$Year)
#Larval Data
Larval = read_csv("Full Larval.csv")
Larval$Year <- as.factor(Larval$Year)
Larval$category <- as.factor(Larval$category)
Larval$Survey.No <- as.factor(Larval$Survey.No)
LarvalSI = filter(Larval, Ground == "SI")
#Land Data
can<-getData('GADM', country="CAN", level=1)
us = getData('GADM', country = "USA", level = 1)
can1 = rbind(can,us)
NBNS <- can1[can1@data$NAME_1%in%c("New Brunswick","Nova Scotia","Prince Edward Island","Newfoundland and Labrador","Québec", "Maine"),]
#Import all packages, CTD data, and land data
#Packages
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Main Data/"))
library(ggplot2)
library(scales)
library(cli)
library(lubridate)
library(reprex)
library(tidyverse)
library(geosphere)
library(reshape2)
library(moderndive)
library(skimr)
library(ggridges)
#library(weathercan)
library(GGally)
library(psych)
library(raster)
library(PBSmapping)
#library(rgeos)
library(sf)
library(terra)
library(knitr)
library(kableExtra)
library(grid)
library(gridExtra)
library(cowplot)
library(DT)
library(dygraphs)
library(leaflet)
library(rmapshaper)
library(plotly)
library(mapproj)
library(oce) #new CTD Data package
#Tagging Data
Tag = read_csv("TaggingEvents.csv") #Tagging Data
polysT = read_csv("timGrounds.csv") #Coloured ground maps
Tag$Year = as.factor(Tag$Year)
Tag$Vessel = as.factor(Tag$Vessel)
Tag$Survey = as.factor(Tag$Survey)
Tag$Tagger = as.factor(Tag$Tagger)
#CTD Data
SST = read_csv("CTD SST.csv") #SST
polysT = read_csv("timGrounds.csv") #coloured ground maps
CTD = read_csv("CTD Full.csv") #All Data
atDepth = read_csv("CTD 30m.csv") #At 30m Depth > This one contains all Stratified Temp + Salinity data as well
SST$Year <- as.factor(SST$Year)
SST$Month <- as.factor(SST$Month)
atDepth$Year <- as.factor(atDepth$Year)
atDepth$Month <- as.factor(atDepth$Month)
CTD$Year <- as.factor(CTD$Year)
CTD$Month <- as.factor(CTD$Month)
CTD$Survey <- as.factor(CTD$Survey)
CTD <- CTD %>%
mutate(Julian_factor = Julian)
CTD$Julian_factor <- as.factor(CTD$Julian_factor)
#SSB Data
SSB = read_csv("SSB Estimates.csv")
SSB$Year <- as.factor(SSB$Year)
SSB$Survey_Number <- as.factor(SSB$Survey_Number)
SSB$Ground <- as.factor(SSB$Ground)
#LRP Data
LRP2 = read_csv("LRP Data.csv")
LRP2 = LRP2 %>% rename(ThreeYear = "3yr Avg")
#Fat Data
FatData = read_csv("Total Fat Data.csv")
FatData9 = order(FatData$Year)
#Larval Data
Larval = read_csv("Full Larval.csv")
Larval$Year <- as.factor(Larval$Year)
Larval$category <- as.factor(Larval$category)
Larval$Survey.No <- as.factor(Larval$Survey.No)
LarvalSI = filter(Larval, Ground == "SI")
#Land Data
can<-getData('GADM', country="CAN", level=1)
us = getData('GADM', country = "USA", level = 1)
can1 = rbind(can,us)
NBNS <- can1[can1@data$NAME_1%in%c("New Brunswick","Nova Scotia","Prince Edward Island","Newfoundland and Labrador","Québec", "Maine"),]
FatData9 = reorder(FatData$Year)
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 1) %>% filter(!is.na(Lat))
print(FatData1 %>%
arrange(FatData1) %>%
filter(Year == i) %>%
mutate(Lat = format(round(Lat, 1), nsmall = 1)) %>%
ggplot(aes(x=Fat, y=Lat, group = Lat, fill = Lat)) +
geom_density_ridges(rel_min_height = 0.01) +
theme(legend.position = "none") +
labs(y="Latitude", x="Fat Percentage (%)"))
cat("\n")
}
for(i in unique(FatData$Year)) {
cat("\n")
cat("######", i, "\n")
cat("\n")
FatData1 = FatData %>% filter(Month == 1) %>% filter(!is.na(Lat))
print(FatData1 %>%
arrange(FatData1$Year) %>%
filter(Year == i) %>%
mutate(Lat = format(round(Lat, 1), nsmall = 1)) %>%
ggplot(aes(x=Fat, y=Lat, group = Lat, fill = Lat)) +
geom_density_ridges(rel_min_height = 0.01) +
theme(legend.position = "none") +
labs(y="Latitude", x="Fat Percentage (%)"))
cat("\n")
}
rm(list = ls())
#Import all packages, CTD data, and land data
#Packages
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Main Data/"))
library(cli)
library(lubridate)
library(reprex)
library(tidyverse)
library(geosphere)
library(reshape2)
library(moderndive)
library(skimr)
library(ggridges)
#library(weathercan)
library(GGally)
library(psych)
library(raster)
library(PBSmapping)
#library(rgeos)
library(sf)
library(terra)
library(knitr)
library(kableExtra)
library(grid)
library(gridExtra)
library(cowplot)
library(DT)
library(dygraphs)
library(leaflet)
library(rmapshaper)
library(plotly)
library(mapproj)
library(oce) #new CTD Data package
library(ggrepel)
options(ggrepel.max.overlaps = Inf)
