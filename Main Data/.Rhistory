FatDataSum = FatData %>%
group_by(Year) %>%
summarize(WAA = mean(WAA), Fat = mean(Fat))
p1 = ggplot(FatDataSum, aes(x=Year)) +
geom_line(aes(y=Fat)) +
labs(y="Fat Percentage (%)") +
xlim(2000,2022)
p2 = ggplot(FatDataSum, aes(x=Year)) +
geom_line(aes(y=WAA)) +
labs(y="Average Weight At Age (g)") +
xlim(2000,2022)
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Main Data/"))
CTDTest = read_csv("CTD Full.csv")
CTDTest = CTDTest %>%
group_by(Year) %>%
summarize(Temperature = mean(Temperature),
AirTemp = mean(mean_temp))
p3 = ggplot(CTDTest, aes(x=Year)) +
geom_line(aes(y=Temperature)) +
labs(y="Sea Surface Temperature (C)") +
xlim(2000,2022)
p4 = ggplot(CTDTest, aes(x=Year)) +
geom_line(aes(y=AirTemp)) +
labs(y="Average Air Temp (C)") +
xlim(2000,2022)
library(patchwork)
p1+p2+p3+p4
View(CTDTest)
?summarize
FatDataSum = FatData %>%
group_by(Year) %>%
summarize(WAA = mean(WAA), Fat = mean(Fat))
p1 = ggplot(FatDataSum, aes(x=Year)) +
geom_line(aes(y=Fat)) +
labs(y="Fat Percentage (%)") +
xlim(2000,2022)
p2 = ggplot(FatDataSum, aes(x=Year)) +
geom_line(aes(y=WAA)) +
labs(y="Average Weight At Age (g)") +
xlim(2000,2022)
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Main Data/"))
CTDTest = read_csv("CTD Full.csv")
CTDTest = CTDTest %>%
group_by(Year) %>%
summarize(Temperature = mean(Temperature),
AirTemp = mean(mean_temp, na.rm = TRUE))
p3 = ggplot(CTDTest, aes(x=Year)) +
geom_line(aes(y=Temperature)) +
labs(y="Sea Surface Temperature (C)") +
xlim(2000,2022)
p4 = ggplot(CTDTest, aes(x=Year)) +
geom_line(aes(y=AirTemp)) +
labs(y="Average Air Temp (C)") +
xlim(2000,2022)
library(patchwork)
p1+p2+p3+p4
FatDataSum = FatData %>%
group_by(Year) %>%
summarize(WAA = mean(WAA), Fat = mean(Fat))
p1 = ggplot(FatDataSum, aes(x=Year)) +
geom_line(aes(y=Fat)) +
labs(y="Fat Percentage (%)") +
xlim(2000,2022)
p2 = ggplot(FatDataSum, aes(x=Year)) +
geom_line(aes(y=WAA)) +
labs(y="Average Weight At Age (g)") +
xlim(2000,2022)
library(patchwork)
p1+p2
FatDataSum = FatData %>%
group_by(Year) %>%
summarize(WAA = mean(WAA), Fat = mean(Fat))
p1 = ggplot(FatDataSum, aes(x=Year)) +
geom_line(aes(y=Fat, size = 1)) +
labs(y="Fat Percentage (%)")
p2 = ggplot(FatDataSum, aes(x=Year)) +
geom_line(aes(y=WAA, size = 1)) +
labs(y="Average Weight At Age (g)")
library(patchwork)
p1+p2
FatDataSum = FatData %>%
group_by(Year) %>%
summarize(WAA = mean(WAA), Fat = mean(Fat))
p1 = ggplot(FatDataSum, aes(x=Year)) +
geom_line(aes(y=Fat)) +
labs(y="Fat Percentage (%)")
p2 = ggplot(FatDataSum, aes(x=Year)) +
geom_line(aes(y=WAA)) +
labs(y="Average Weight At Age (g)")
library(patchwork)
p1+p2
## Global options
year= "2022" #Change global/current year here
knitr::opts_knit$set(root.dir = paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/HTML Markdown/"))
knitr::opts_chunk$set(echo=FALSE, message=FALSE, warning=FALSE, fig.align='center')
#Import all packages, CTD data, and land data
#Packages
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Main Data/"))
library(cli)
library(lubridate)
library(reprex)
library(tidyverse)
library(geosphere)
library(reshape2)
library(moderndive)
library(skimr)
library(ggridges)
library(weathercan)
library(GGally)
library(psych)
library(raster)
library(PBSmapping)
library(rgeos)
library(knitr)
library(kableExtra)
library(grid)
library(gridExtra)
library(cowplot)
#Tagging Data
Tag = read_csv("TaggingEvents.csv") #Tagging Data
polysT = read_csv("timGrounds.csv") #Coloured ground maps
Tag$Year = as.factor(Tag$Year)
Tag$Vessel = as.factor(Tag$Vessel)
Tag$Survey = as.factor(Tag$Survey)
Tag$Tagger = as.factor(Tag$Tagger)
#CTD Data
SST = read_csv("CTD SST.csv") #SST
polysT = read_csv("timGrounds.csv") #coloured ground maps
CTD = read_csv("CTD Full.csv") #All Data
atDepth = read_csv("CTD 30m.csv") #At 30m Depth > This one contains all Stratified Temp + Salinity data as well
SST$Year <- as.factor(SST$Year)
SST$Month <- as.factor(SST$Month)
atDepth$Year <- as.factor(atDepth$Year)
atDepth$Month <- as.factor(atDepth$Month)
CTD$Year <- as.factor(CTD$Year)
CTD$Month <- as.factor(CTD$Month)
CTD$Survey <- as.factor(CTD$Survey)
CTD <- CTD %>%
mutate(Julian_factor = Julian)
CTD$Julian_factor <- as.factor(CTD$Julian_factor)
#SSB Data
SSB = read_csv("SSB Estimates.csv")
SSB$Year <- as.factor(SSB$Year)
SSB$Survey_Number <- as.factor(SSB$Survey_Number)
SSB$Ground <- as.factor(SSB$Ground)
#LRP Data
LRP2 = read_csv("LRP Data.csv")
#Fat Data
FatData = read_csv("Total Fat Data.csv")
#Larval Data
Larval = read_csv("Full Larval.csv")
Larval$Year <- as.factor(Larval$Year)
Larval$category <- as.factor(Larval$category)
Larval$surv.No <- as.factor(Larval$surv.No)
#Land Data
can<-getData('GADM', country="CAN", level=1)
us = getData('GADM', country = "USA", level = 1)
can1 = rbind(can,us)
NBNS <- can1[can1@data$NAME_1%in%c("New Brunswick","Nova Scotia","Prince Edward Island","Newfoundland and Labrador","Québec", "Maine"),]
#Import all packages, CTD data, and land data
#Packages
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Main Data/"))
library(cli)
library(lubridate)
library(reprex)
library(tidyverse)
library(geosphere)
library(reshape2)
library(moderndive)
library(skimr)
library(ggridges)
library(weathercan)
library(GGally)
library(psych)
library(raster)
library(PBSmapping)
library(rgeos)
library(knitr)
library(kableExtra)
library(grid)
library(gridExtra)
library(cowplot)
#Tagging Data
Tag = read_csv("TaggingEvents.csv") #Tagging Data
polysT = read_csv("timGrounds.csv") #Coloured ground maps
Tag$Year = as.factor(Tag$Year)
Tag$Vessel = as.factor(Tag$Vessel)
Tag$Survey = as.factor(Tag$Survey)
Tag$Tagger = as.factor(Tag$Tagger)
#CTD Data
SST = read_csv("CTD SST.csv") #SST
polysT = read_csv("timGrounds.csv") #coloured ground maps
CTD = read_csv("CTD Full.csv") #All Data
atDepth = read_csv("CTD 30m.csv") #At 30m Depth > This one contains all Stratified Temp + Salinity data as well
SST$Year <- as.factor(SST$Year)
SST$Month <- as.factor(SST$Month)
atDepth$Year <- as.factor(atDepth$Year)
atDepth$Month <- as.factor(atDepth$Month)
CTD$Year <- as.factor(CTD$Year)
CTD$Month <- as.factor(CTD$Month)
CTD$Survey <- as.factor(CTD$Survey)
CTD <- CTD %>%
mutate(Julian_factor = Julian)
CTD$Julian_factor <- as.factor(CTD$Julian_factor)
#SSB Data
SSB = read_csv("SSB Estimates.csv")
SSB$Year <- as.factor(SSB$Year)
SSB$Survey_Number <- as.factor(SSB$Survey_Number)
SSB$Ground <- as.factor(SSB$Ground)
#LRP Data
LRP2 = read_csv("LRP Data.csv")
#Fat Data
FatData = read_csv("Total Fat Data.csv")
#Larval Data
Larval = read_csv("Full Larval.csv")
Larval$Year <- as.factor(Larval$Year)
Larval$category <- as.factor(Larval$category)
Larval$surv.No <- as.factor(Larval$surv.No)
#Land Data
can<-getData('GADM', country="CAN", level=1)
us = getData('GADM', country = "USA", level = 1)
can1 = rbind(can,us)
NBNS <- can1[can1@data$NAME_1%in%c("New Brunswick","Nova Scotia","Prince Edward Island","Newfoundland and Labrador","Québec", "Maine"),]
#Import All Boxes
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Box Coordinates/"))
boxes = read.csv("surveyBoxes.csv")
# Scots Bay plankton and CTD box
SBplankton=boxes[which(boxes$Box == "SBPlanktonBox"), ]
SBCTD=boxes[which(boxes$Box == "SBocean"), ]
# Scots Bay
SUA = read.csv("polygon_SBEastern.csv")
polyEastern = as.PolySet(SUA, projection="LL")
SUA = read.csv("polygon_SBNorthern.csv")
polyNorthern = as.PolySet(SUA, projection="LL")
SUA = read.csv("polygon_SB.csv")
polySB_main = as.PolySet(SUA, projection="LL")
#German Bank CTD box
GBCTD=boxes[which(boxes$Box == "GBocean"), ]
# German Bank
SUA = read.csv("polygon_GB.csv")
polyGB = as.PolySet(SUA, projection="LL")
# Seal Island
SUA = read.csv("polygon_SI.csv")
polySI = as.PolySet(SUA, projection="LL")
ggplot(data=LRP2, aes(x=Year, y=Biomass)) +
geom_point() +
geom_path() +
geom_point(data=LRP2, x=LRP2$Year, y=LRP2$'3yr Avg') +
geom_path(data=LRP2, x=LRP2$Year, y=LRP2$'3yr Avg') +
geom_hline(yintercept = 317846, linetype = "longdash", size =1) +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass)) +
geom_line(aes(y="3yr Avg")) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1) +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
View(LRP2)
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass)) +
geom_line(aes(y='3yr Avg')) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1) +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
#Import all packages, CTD data, and land data
#Packages
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Main Data/"))
library(cli)
library(lubridate)
library(reprex)
library(tidyverse)
library(geosphere)
library(reshape2)
library(moderndive)
library(skimr)
library(ggridges)
library(weathercan)
library(GGally)
library(psych)
library(raster)
library(PBSmapping)
library(rgeos)
library(knitr)
library(kableExtra)
library(grid)
library(gridExtra)
library(cowplot)
#Tagging Data
Tag = read_csv("TaggingEvents.csv") #Tagging Data
polysT = read_csv("timGrounds.csv") #Coloured ground maps
Tag$Year = as.factor(Tag$Year)
Tag$Vessel = as.factor(Tag$Vessel)
Tag$Survey = as.factor(Tag$Survey)
Tag$Tagger = as.factor(Tag$Tagger)
#CTD Data
SST = read_csv("CTD SST.csv") #SST
polysT = read_csv("timGrounds.csv") #coloured ground maps
CTD = read_csv("CTD Full.csv") #All Data
atDepth = read_csv("CTD 30m.csv") #At 30m Depth > This one contains all Stratified Temp + Salinity data as well
SST$Year <- as.factor(SST$Year)
SST$Month <- as.factor(SST$Month)
atDepth$Year <- as.factor(atDepth$Year)
atDepth$Month <- as.factor(atDepth$Month)
CTD$Year <- as.factor(CTD$Year)
CTD$Month <- as.factor(CTD$Month)
CTD$Survey <- as.factor(CTD$Survey)
CTD <- CTD %>%
mutate(Julian_factor = Julian)
CTD$Julian_factor <- as.factor(CTD$Julian_factor)
#SSB Data
SSB = read_csv("SSB Estimates.csv")
SSB$Year <- as.factor(SSB$Year)
SSB$Survey_Number <- as.factor(SSB$Survey_Number)
SSB$Ground <- as.factor(SSB$Ground)
#LRP Data
LRP2 = read_csv("LRP Data.csv")
LRP2 = LRP2 %>% rename(ThreeYear = "ThreeYear")
#Import all packages, CTD data, and land data
#Packages
setwd(paste0("C:/Users/", Sys.info()[7],"/Documents/GitHub/HerringScience.github.io/Main Data/"))
library(cli)
library(lubridate)
library(reprex)
library(tidyverse)
library(geosphere)
library(reshape2)
library(moderndive)
library(skimr)
library(ggridges)
library(weathercan)
library(GGally)
library(psych)
library(raster)
library(PBSmapping)
library(rgeos)
library(knitr)
library(kableExtra)
library(grid)
library(gridExtra)
library(cowplot)
#Tagging Data
Tag = read_csv("TaggingEvents.csv") #Tagging Data
polysT = read_csv("timGrounds.csv") #Coloured ground maps
Tag$Year = as.factor(Tag$Year)
Tag$Vessel = as.factor(Tag$Vessel)
Tag$Survey = as.factor(Tag$Survey)
Tag$Tagger = as.factor(Tag$Tagger)
#CTD Data
SST = read_csv("CTD SST.csv") #SST
polysT = read_csv("timGrounds.csv") #coloured ground maps
CTD = read_csv("CTD Full.csv") #All Data
atDepth = read_csv("CTD 30m.csv") #At 30m Depth > This one contains all Stratified Temp + Salinity data as well
SST$Year <- as.factor(SST$Year)
SST$Month <- as.factor(SST$Month)
atDepth$Year <- as.factor(atDepth$Year)
atDepth$Month <- as.factor(atDepth$Month)
CTD$Year <- as.factor(CTD$Year)
CTD$Month <- as.factor(CTD$Month)
CTD$Survey <- as.factor(CTD$Survey)
CTD <- CTD %>%
mutate(Julian_factor = Julian)
CTD$Julian_factor <- as.factor(CTD$Julian_factor)
#SSB Data
SSB = read_csv("SSB Estimates.csv")
SSB$Year <- as.factor(SSB$Year)
SSB$Survey_Number <- as.factor(SSB$Survey_Number)
SSB$Ground <- as.factor(SSB$Ground)
#LRP Data
LRP2 = read_csv("LRP Data.csv")
LRP2 = LRP2 %>% rename(ThreeYear = "3yr Avg")
#Fat Data
FatData = read_csv("Total Fat Data.csv")
#Larval Data
Larval = read_csv("Full Larval.csv")
Larval$Year <- as.factor(Larval$Year)
Larval$category <- as.factor(Larval$category)
Larval$surv.No <- as.factor(Larval$surv.No)
#Land Data
can<-getData('GADM', country="CAN", level=1)
us = getData('GADM', country = "USA", level = 1)
can1 = rbind(can,us)
NBNS <- can1[can1@data$NAME_1%in%c("New Brunswick","Nova Scotia","Prince Edward Island","Newfoundland and Labrador","Québec", "Maine"),]
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass)) +
geom_line(aes(y=ThreeYear)) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1) +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "green")) +
geom_line(aes(y=ThreeYear, colour = "blue")) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "green")) +
geom_line(aes(y=ThreeYear, colour = "black")) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "green")) +
geom_line(aes(y=ThreeYear, colour = "black")) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "green")) +
geom_line(aes(y=ThreeYear, colour = "black")) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "green")) +
geom_line(aes(y=ThreeYear) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "green")) +
geom_line(aes(y=ThreeYear)) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, fill = "green")) +
geom_line(aes(y=ThreeYear)) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
colours = NULL
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "green")) +
geom_line(aes(y=ThreeYear)) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
colors = NULL
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "green")) +
geom_line(aes(y=ThreeYear)) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
colors = NULL
colors = c("Biomass" = "green", "ThreeYear" = "blue")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "Biomass")) +
geom_line(aes(y=ThreeYear, colour = "ThreeYear")) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x="Year", y = "Biomass (mt)")
colors = NULL
colors = c("Biomass" = "green", "ThreeYear" = "blue")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "Biomass")) +
geom_line(aes(y=ThreeYear, colour = "ThreeYear")) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x = "Year",
y = "Biomass (mt)",
color = "Legend") +
scale_color_manual(values = colors)
colors = NULL
colors = c("Biomass" = "green", "Three Year Avg" = "blue")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "Biomass")) +
geom_line(aes(y=ThreeYear, colour = "Three Year Avg")) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x = "Year",
y = "Biomass (mt)",
color = "Legend") +
scale_color_manual(values = colors)
colors = NULL
colors = c("Biomass" = "darkgreen", "Three Year Avg" = "blue")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "Biomass")) +
geom_line(aes(y=ThreeYear, colour = "Three Year Avg")) +
geom_hline(yintercept = 317846, linetype = "longdash", size =1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 55)) +
labs(x = "Year",
y = "Biomass (mt)",
color = "Legend") +
scale_color_manual(values = colors)
colors = NULL
colors = c("Biomass" = "darkgreen", "Three Year Avg" = "blue")
ggplot(LRP2, aes(x=Year)) +
geom_line(aes(y=Biomass, colour = "Biomass")) +
geom_line(aes(y=ThreeYear, colour = "Three Year Avg")) +
geom_hline(yintercept = 317846, linetype = "longdash", size = 1, colour = "red") +
scale_y_continuous(labels=scales::comma) +
theme(axis.text.x = element_text(angle = 35)) +
labs(x = "Year",
y = "Biomass (mt)",
color = "Legend") +
scale_color_manual(values = colors)
