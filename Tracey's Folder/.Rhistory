ThreeYearRollingBiomassGraph <- ggplot(ThreeYearRollingBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line()
print(ThreeYearRollingBiomassGraph)
CombinedPlot2 <- merge(aggregateGB, GermanBankPeakBiomass, ThreeYearRollingBiomass, by="Year" )
GermanBankPeakBiomass <- subset(PeakBiomass, Ground == "GB")
GermanBankPeakBiomass <- GermanBankPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
GermanBankPeakBiomassPointGraph <- (ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass")))
CombinedPlot2 <- merge(aggregateGB, GermanBankPeakBiomass, ThreeYearRollingBiomass, by="Year" )
PeakBiomass <- subset(Survey_Factors, select = c("Survey_Date", "Year","Ground", "DFO_Estimate"))
PeakBiomass <- na.omit(PeakBiomass)
PeakBiomass <- subset(PeakBiomass, Survey_Date < '2023-05-22')
GermanBankPeakBiomass <- subset(PeakBiomass, Ground == "GB")
GermanBankPeakBiomass <- GermanBankPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
GermanBankPeakBiomassPointGraph <- (ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass")))
CombinedPlot2 <- merge(aggregateGB, GermanBankPeakBiomass, ThreeYearRollingBiomass, by="Year" )
ThreeYearRollingBiomassGraph <- print(ggplot(ThreeYearRollingBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line())
ThreeYearRollingBiomassGraph <- print(ggplot(ThreeYearRollingBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line())
View(aggregateGB)
View(ThreeYearRollingBiomass)
CombinedPlot2 <- merge(aggregateGB, GermanBankPeakBiomass, by="Year" )
View(CombinedPlot2)
CombinedPlot2 <- merge (CombinedPlot2, ThreeYearRollingBiomass, by = "Year")
View(CombinedPlot2)
CombinedPlot3 <- print(ggplot(CombinedPlot2, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "blue")) +
geom_line(aes(y=DFO_Estimate.y, color = "red")) +
geom_line(aes(y=avg_biomass3, color="green")) +
labs(x = "Year", y = "Total Biomass") +
scale_colour_manual(values = c("blue", "red", "green"), labels = c("German Bank Total Yearly Biomass", "German Bank Peak Biomass", "Three Year Rolling Biomass")))
CombinedPlot3 <- print(ggplot(CombinedPlot2, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "blue")) +
geom_line(aes(y=DFO_Estimate.y, color = "red")) +
geom_line(aes(y=avg_biomass3, color="green")) +
labs(x = "Year", y = "Total Biomass") +
scale_colour_manual(values = c("blue", "red", "green"), labels = c("German Bank Total Yearly Biomass", "German Bank Three Year Rolling Biomass", "German Bank Peak Biomass")))
GermanBankPeakBiomassPointGraph <- (ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass")))
plot.new()
GermanBankPeakBiomassPointGraph <- (ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass")))
TotalBiomass <- subset(Survey_Factors, select = c("id", "Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- subset(Survey_Factors, select = c("id", "Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- na.omit(TotalBiomass)
TotalBiomass <- subset(TotalBiomass, Survey_Date < '2023-05-22')
GermanBankTotalBiomass <- subset(TotalBiomass, Ground == "GB")
GermanBankTotalBiomass <- GermanBankTotalBiomass %>% group_by(Year) %>% add_count(Year)
aggregateGB <- aggregate(GermanBankTotalBiomass$DFO_Estimate, list(GermanBankTotalBiomass$Year), FUN=(sum))
colnames(aggregateGB)<-c("Year", "DFO_Estimate")
GBTotalBiomass <- print(ggplot(aggregateGB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point(aes(size = 2)) +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
PeakBiomass <- subset(Survey_Factors, select = c("Survey_Date", "Year","Ground", "DFO_Estimate"))
PeakBiomass <- na.omit(PeakBiomass)
PeakBiomass <- subset(PeakBiomass, Survey_Date < '2023-05-22')
GermanBankPeakBiomass <- subset(PeakBiomass, Ground == "GB")
GermanBankPeakBiomass <- GermanBankPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
GermanBankPeakBiomassPointGraph <- (ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass")))
CombinedPlot2 <- merge(aggregateGB, GermanBankPeakBiomass, by="Year" )
CombinedPlot2 <- merge (CombinedPlot2, ThreeYearRollingBiomass, by = "Year")
CombinedPlot3 <- print(ggplot(CombinedPlot2, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "blue")) +
geom_line(aes(y=DFO_Estimate.y, color = "red")) +
geom_line(aes(y=avg_biomass3, color="green")) +
labs(x = "Year", y = "Total Biomass") +
scale_colour_manual(values = c("blue", "red", "green"), labels = c("German Bank Total Yearly Biomass", "German Bank Three Year Rolling Biomass", "German Bank Peak Biomass")))
CombinedPlot3 <- print(ggplot(CombinedPlot2, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "German Bank Total Yearly Biomass")) +
geom_line(aes(y=DFO_Estimate.y, color = "red")) +
geom_line(aes(y=avg_biomass3, color="green")) +
labs(x = "Year", y = "Total Biomass") +
scale_colour_manual(values = c("blue", "red", "green"), labels = c("German Bank Total Yearly Biomass", "German Bank Three Year Rolling Biomass", "German Bank Peak Biomass")))
CombinedPlot3 <- print(ggplot(CombinedPlot2, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "blue")) +
geom_line(aes(y=DFO_Estimate.y, color = "red")) +
geom_line(aes(y=avg_biomass3, color="green")) +
labs(x = "Year", y = "Total Biomass") +
scale_colour_manual(values = c("blue", "red", "green"), labels = c("German Bank Total Yearly Biomass", "German Bank Three Year Rolling Biomass", "German Bank Peak Biomass")))
CombinedPlot3 <- print(ggplot(CombinedPlot2, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "German Bank Total Yearly Biomass")) +
geom_line(aes(y=DFO_Estimate.y, color = "German Bank Peak Biomass")) +
geom_line(aes(y=avg_biomass3, color="German Bank Three Year Rolling Biomass")) +
labs(x = "Year", y = "Total Biomass"))
###remove everything in environment
rm(list = ls())
options(scipen = 999)
setwd("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Tracey's Folder")
Survey_Factors <- read_csv("surveyFactorsAll_Tracey with SSB data.csv")
Survey_Data <- read_csv("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Main Data/Survey Data.csv")
TotalBiomass <- subset(Survey_Factors, select = c("id", "Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- na.omit(TotalBiomass)
TotalBiomass <- subset(TotalBiomass, Survey_Date < '2023-05-22')
GermanBankTotalBiomass <- subset(TotalBiomass, Ground == "GB")
GermanBankTotalBiomass <- GermanBankTotalBiomass %>% group_by(Year) %>% add_count(Year)
aggregateGB <- aggregate(GermanBankTotalBiomass$DFO_Estimate, list(GermanBankTotalBiomass$Year), FUN=(sum))
colnames(aggregateGB)<-c("Year", "DFO_Estimate")
GBTotalBiomass <- print(ggplot(aggregateGB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point(aes(size = 2)) +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
PeakBiomass <- subset(Survey_Factors, select = c("Survey_Date", "Year","Ground", "DFO_Estimate"))
PeakBiomass <- na.omit(PeakBiomass)
PeakBiomass <- subset(PeakBiomass, Survey_Date < '2023-05-22')
GermanBankPeakBiomass <- subset(PeakBiomass, Ground == "GB")
GermanBankPeakBiomass <- GermanBankPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
GermanBankPeakBiomassPointGraph <- (ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass")))
###remove everything in environment
rm(list = ls())
options(scipen = 999)
setwd("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Tracey's Folder")
Survey_Factors <- read_csv("surveyFactorsAll_Tracey with SSB data.csv")
Survey_Data <- read_csv("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Main Data/Survey Data.csv")
TotalBiomass <- subset(Survey_Factors, select = c("id", "Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- na.omit(TotalBiomass)
TotalBiomass <- subset(TotalBiomass, Survey_Date < '2023-05-22')
GermanBankTotalBiomass <- subset(TotalBiomass, Ground == "GB")
GermanBankTotalBiomass <- GermanBankTotalBiomass %>% group_by(Year) %>% add_count(Year)
aggregateGB <- aggregate(GermanBankTotalBiomass$DFO_Estimate, list(GermanBankTotalBiomass$Year), FUN=(sum))
colnames(aggregateGB)<-c("Year", "DFO_Estimate")
GBTotalBiomass <- print(ggplot(aggregateGB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point(aes(size = 2)) +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
PeakBiomass <- subset(Survey_Factors, select = c("Survey_Date", "Year","Ground", "DFO_Estimate"))
PeakBiomass <- na.omit(PeakBiomass)
PeakBiomass <- subset(PeakBiomass, Survey_Date < '2023-05-22')
GermanBankPeakBiomass <- subset(PeakBiomass, Ground == "GB")
GermanBankPeakBiomass <- GermanBankPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
GermanBankPeakBiomassPointGraph <- (ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass")))
GermanBankPeakBiomass <- subset(PeakBiomass, Ground == "GB")
GermanBankPeakBiomass <- GermanBankPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
GermanBankPeakBiomassPointGraph <- ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass"))
GermanBankPeakBiomassPointGraph <- print(ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass")))
plot.new()
GermanBankPeakBiomassPointGraph <- ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass"))
GermanBankPeakBiomass <- GermanBankPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
View(GermanBankPeakBiomass)
GermanBankPeakBiomassPointGraph <- ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass"))
ThreeYearRollingBiomass <- aggregateGB %>%
arrange(Year) %>%
group_by(Year) %>%
mutate(avg_biomass3 = rollmean(DFO_Estimate, k = 3, fill = NA, align = 'right'))
ThreeYearRollingBiomassGraph <- print(ggplot(ThreeYearRollingBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line())
CombinedPlot <- merge(aggregateGB, GermanBankPeakBiomass, by="Year" )
CombinedPlot <- merge (CombinedPlot, ThreeYearRollingBiomass, by = "Year")
CombinedPlot2 <- print(ggplot(CombinedPlot, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "German Bank Total Yearly Biomass")) +
geom_line(aes(y=DFO_Estimate.y, color = "German Bank Peak Biomass")) +
geom_line(aes(y=avg_biomass3, color="German Bank Three Year Rolling Biomass")) +
labs(x = "Year", y = "Total Biomass"))
TotalBiomass <- subset(Survey_Factors, select = c("id", "Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- na.omit(TotalBiomass)
TotalBiomass <- subset(TotalBiomass, Survey_Date < '2023-05-22')
GermanBankTotalBiomass <- subset(TotalBiomass, Ground == "GB")
GermanBankTotalBiomass <- GermanBankTotalBiomass %>% group_by(Year) %>% add_count(Year)
aggregateGB <- aggregate(GermanBankTotalBiomass$DFO_Estimate, list(GermanBankTotalBiomass$Year), FUN=(sum))
colnames(aggregateGB)<-c("Year", "DFO_Estimate")
GBTotalBiomass <- print(ggplot(aggregateGB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point(aes(size = 2)) +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
PeakBiomass <- subset(Survey_Factors, select = c("Survey_Date", "Year","Ground", "DFO_Estimate"))
PeakBiomass <- na.omit(PeakBiomass)
PeakBiomass <- subset(PeakBiomass, Survey_Date < '2023-05-22')
GermanBankPeakBiomass <- subset(PeakBiomass, Ground == "GB")
GermanBankPeakBiomass <- GermanBankPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
GermanBankPeakBiomassPointGraph <- ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass"))
ThreeYearRollingBiomass <- aggregateGB %>%
arrange(Year) %>%
group_by(Year) %>%
mutate(avg_biomass3 = rollmean(DFO_Estimate, k = 3, fill = NA, align = 'right'))
ThreeYearRollingBiomassGraph <- print(ggplot(ThreeYearRollingBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line())
ThreeYearRollingPeak <- GermanBankPeakBiomass %>%
arrange(Year) %>%
group_by(Year) %>%
mutate(avg_biomass3 =rollmean(DFO_Estimate, k=3, fill = NA, align = 'right'))
TotalBiomass <- subset(Survey_Factors, select = c("id", "Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- na.omit(TotalBiomass)
TotalBiomass <- subset(TotalBiomass, Survey_Date < '2023-05-22')
GermanBankTotalBiomass <- subset(TotalBiomass, Ground == "GB")
GermanBankTotalBiomass <- GermanBankTotalBiomass %>% group_by(Year) %>% add_count(Year)
aggregateGB <- aggregate(GermanBankTotalBiomass$DFO_Estimate, list(GermanBankTotalBiomass$Year), FUN=(sum))
colnames(aggregateGB)<-c("Year", "DFO_Estimate")
GBTotalBiomass <- print(ggplot(aggregateGB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point(aes(size = 2)) +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
PeakBiomass <- subset(Survey_Factors, select = c("Survey_Date", "Year","Ground", "DFO_Estimate"))
PeakBiomass <- na.omit(PeakBiomass)
PeakBiomass <- subset(PeakBiomass, Survey_Date < '2023-05-22')
GermanBankPeakBiomass <- subset(PeakBiomass, Ground == "GB")
GermanBankPeakBiomass <- GermanBankPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
GermanBankPeakBiomassGraph2 <- ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = "Yearly Peak Biomass")) +
geom_point()+
geom_line()
labs(x="Year", y="Peak Biomass (mt)")
GermanBankPeakBiomassPointGraph <- ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass"))
CombinedPlot <- merge(aggregateGB, GermanBankPeakBiomass, by="Year" )
CombinedPlot2 <- print(ggplot(CombinedPlot, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "German Bank Total Yearly Biomass")) +
geom_line(aes(y=DFO_Estimate.y, color = "German Bank Peak Biomass")) +
#geom_line(aes(y=avg_biomass3, color="German Bank Three Year Rolling Biomass")) +
labs(x = "Year", y = "Total Biomass"))
ThreeYearRollingPeakGraph <- ggplot(ThreeYearRollingPeakGraph, aes(x=Year, y=avg_biomass3)) +
geom_point()+
geom_line()
ThreeYearRollingPeakGraph <- ggplot(ThreeYearRollingPeak, aes(x=Year, y=avg_biomass3)) +
geom_point()+
geom_line()
ThreeYearRollingPeakGraph <- print(ggplot(ThreeYearRollingPeak, aes(x=Year, y=avg_biomass3)) +
geom_point()+
geom_line())
CombinePlot3 <- merge(ThreeYearRollingBiomass, ThreeYearRollingPeak, by="Year")
View(CombinePlot3)
CombinedPlot3 <- merge(ThreeYearRollingBiomass, ThreeYearRollingPeak, by="Year")
View(CombinedPlot3)
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, colour = "Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, colour = "Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, colour = "Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, colour = "Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)", main = "German Bank"))
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, colour = "Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, colour = "Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)") +
title("German Bank"))
title(aes("German Bank"))
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, colour = "Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, colour = "Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)") +
title(aes("German Bank")))
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, colour = "Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, colour = "Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, legend = "Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, legend = "Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, colour = "Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, colour = "Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, colour = "German Bank Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, colour = "German Bank Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
###remove everything in environment
rm(list = ls())
options(scipen = 999)
setwd("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Tracey's Folder")
Survey_Factors <- read_csv("surveyFactorsAll_Tracey with SSB data.csv")
Survey_Data <- read_csv("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Main Data/Survey Data.csv")
TotalBiomass <- subset(Survey_Factors, select = c("Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- na.omit(TotalBiomass)
TotalBiomass <- subset(TotalBiomass, Survey_Date < '2023-05-22')
ScotsBayTotalBiomass <- subset(TotalBiomass, Ground == "SB")
ScotsBayTotalBiomass <- ScotsBayTotalBiomass %>% group_by(Year) %>% add_count(Year)
aggregateSB <- aggregate(ScotsBayTotalBiomass$DFO_Estimate, list(ScotsBayTotalBiomass$Year), FUN=(sum))
colnames(aggregateSB)<-c("Year", "DFO_Estimate")
SBTotalBiomass <- print(ggplot(aggregateSB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point(aes(size = 2)) +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
SBTotalBiomass <- print(ggplot(aggregateSB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point() +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
PeakBiomass <- subset(Survey_Factors, select = c("Survey_Date", "Year","Ground", "DFO_Estimate"))
PeakBiomass <- na.omit(PeakBiomass)
PeakBiomass <- subset(PeakBiomass, Survey_Date < '2023-05-22')
ScotsBayPeakBiomass <- subset(PeakBiomass, Ground == "SB")
ScotsBayPeakBiomass <- ScotsBayPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
ScotsBayPeakBiomassPointGraph <- (ggplot(ScotsBayPeakBiomass, aes(x=Year, y=DFO_Estimate, col = 'blue')) +
geom_point(colour = 'blue', size = 3) +
geom_line()+
legend(2000, 500000, legend= c("Scots Bay Peak Biomass")))
CombinedPlot2 <- merge(aggregateSB, ScotsBayPeakBiomass, by="Year" )
CombinedPlot3 <- print(ggplot(CombinedPlot2, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "blue")) +
geom_line(aes(y=DFO_Estimate.y, color = "red")) +
labs(x = "Year", y = "Total Biomass") +
scale_colour_manual(values = c("blue", "red"), labels = c("Scots Bay Total Yearly Biomass", "Scots Bay Peak Biomass")))
CombinedPlot3 <- print(ggplot(CombinedPlot2, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "Scots Bay Total Yearly Biomass")) +
geom_line(aes(y=DFO_Estimate.y, color = "Scots Bay Peak Biomass")) +
labs(x = "Year", y = "Total Biomass"))
TotalBiomass <- subset(Survey_Factors, select = c("id", "Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- na.omit(TotalBiomass)
TotalBiomass <- subset(TotalBiomass, Survey_Date < '2023-05-22')
ScotsBayTotalBiomass <- subset(TotalBiomass, Ground == "SB")
ScotsBayTotalBiomass <- ScotsBayTotalBiomass %>% group_by(Year) %>% add_count(Year)
aggregateSB <- aggregate(ScotsBayTotalBiomass$DFO_Estimate, list(ScotsBayTotalBiomass$Year), FUN=(sum))
colnames(aggregateSB)<-c("Year", "DFO_Estimate")
###remove everything in environment
rm(list = ls())
options(scipen = 999)
setwd("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Tracey's Folder")
Survey_Factors <- read_csv("surveyFactorsAll_Tracey with SSB data.csv")
Survey_Data <- read_csv("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Main Data/Survey Data.csv")
TotalBiomass <- subset(Survey_Factors, select = c("id", "Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- na.omit(TotalBiomass)
TotalBiomass <- subset(TotalBiomass, Survey_Date < '2023-05-22')
ScotsBayTotalBiomass <- subset(TotalBiomass, Ground == "SB")
ScotsBayTotalBiomass <- ScotsBayTotalBiomass %>% group_by(Year) %>% add_count(Year)
aggregateSB <- aggregate(ScotsBayTotalBiomass$DFO_Estimate, list(ScotsBayTotalBiomass$Year), FUN=(sum))
colnames(aggregateSB)<-c("Year", "DFO_Estimate")
SBTotalBiomass <- print(ggplot(aggregateSB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point(aes(size = 2)) +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
SBTotalBiomass <- print(ggplot(aggregateSB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point() +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
PeakBiomass <- subset(Survey_Factors, select = c("Survey_Date", "Year","Ground", "DFO_Estimate"))
PeakBiomass <- na.omit(PeakBiomass)
PeakBiomass <- subset(PeakBiomass, Survey_Date < '2023-05-22')
ScotsBayPeakBiomass <- subset(PeakBiomass, Ground == "SB")
ScotsBayPeakBiomass <- ScotsBayPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
ScotsBayPeakBiomassGraph2 <- ggplot(ScotsBayPeakBiomass, aes(x=Year, y=DFO_Estimate, col = "Yearly Peak Biomass")) +
geom_point()+
geom_line()
labs(x="Year", y="Peak Biomass (mt)")
ScotsBayPeakBiomassPointGraph <- ggplot(ScotsBayPeakBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line()+
legend(2000, 500000, legend= c("Scots Bay Peak Biomass"))
CombinedPlot <- merge(aggregateGB, GermanBankPeakBiomass, by="Year" )
CombinedPlot <- merge(aggregateSB, ScotsBayPeakBiomass, by="Year" )
CombinedPlot2 <- print(ggplot(CombinedPlot, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "Scots Bay Total Yearly Biomass")) +
geom_line(aes(y=DFO_Estimate.y, color = "Scots Bay Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
ThreeYearRollingBiomass <- aggregateSB %>%
arrange(Year) %>%
group_by(Year) %>%
mutate(avg_biomass3 = rollmean(DFO_Estimate, k = 3, fill = NA, align = 'right'))
ThreeYearRollingBiomassGraph <- print(ggplot(ThreeYearRollingBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line())
ThreeYearRollingPeak <- ScotsBayPeakBiomass %>%
arrange(Year) %>%
group_by(Year) %>%
mutate(avg_biomass3 =rollmean(DFO_Estimate, k=3, fill = NA, align = 'right'))
ThreeYearRollingPeakGraph <- print(ggplot(ThreeYearRollingPeak, aes(x=Year, y=avg_biomass3)) +
geom_point()+
geom_line())
CombinedPlot3 <- merge(ThreeYearRollingBiomass, ThreeYearRollingPeak, by="Year")
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, colour = "Scots Bay Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, colour = "Scots Bay Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
###remove everything in environment
rm(list = ls())
options(scipen = 999)
setwd("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Tracey's Folder")
Survey_Factors <- read_csv("surveyFactorsAll_Tracey with SSB data.csv")
Survey_Data <- read_csv("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Main Data/Survey Data.csv")
###remove everything in environment
rm(list = ls())
options(scipen = 999)
setwd("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Tracey's Folder")
Survey_Factors <- read_csv("surveyFactorsAll_Tracey with SSB data.csv")
Survey_Data <- read_csv("C:/Users/herri/Documents/GitHub/HerringScience.github.io/Main Data/Survey Data.csv")
TotalBiomass <- subset(Survey_Factors, select = c("id", "Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- na.omit(TotalBiomass)
TotalBiomass <- subset(TotalBiomass, Survey_Date < '2023-05-22')
ScotsBayTotalBiomass <- subset(TotalBiomass, Ground == "SB")
ScotsBayTotalBiomass <- ScotsBayTotalBiomass %>% group_by(Year) %>% add_count(Year)
aggregateSB <- aggregate(ScotsBayTotalBiomass$DFO_Estimate, list(ScotsBayTotalBiomass$Year), FUN=(sum))
colnames(aggregateSB)<-c("Year", "DFO_Estimate")
SBTotalBiomass <- print(ggplot(aggregateSB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point() +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
PeakBiomass <- subset(Survey_Factors, select = c("Survey_Date", "Year","Ground", "DFO_Estimate"))
PeakBiomass <- na.omit(PeakBiomass)
PeakBiomass <- subset(PeakBiomass, Survey_Date < '2023-05-22')
ScotsBayPeakBiomass <- subset(PeakBiomass, Ground == "SB")
ScotsBayPeakBiomass <- ScotsBayPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
ScotsBayPeakBiomassGraph2 <- ggplot(ScotsBayPeakBiomass, aes(x=Year, y=DFO_Estimate, col = "Yearly Peak Biomass")) +
geom_point()+
geom_line()
labs(x="Year", y="Peak Biomass (mt)")
ScotsBayPeakBiomassPointGraph <- ggplot(ScotsBayPeakBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line()+
legend(2000, 500000, legend= c("Scots Bay Peak Biomass"))
CombinedPlot <- merge(aggregateSB, ScotsBayPeakBiomass, by="Year" )
CombinedPlot2 <- print(ggplot(CombinedPlot, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "Scots Bay Total Yearly Biomass")) +
geom_line(aes(y=DFO_Estimate.y, color = "Scots Bay Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
ThreeYearRollingBiomass <- aggregateSB %>%
arrange(Year) %>%
group_by(Year) %>%
mutate(avg_biomass3 = rollmean(DFO_Estimate, k = 3, fill = NA, align = 'right'))
ThreeYearRollingBiomassGraph <- print(ggplot(ThreeYearRollingBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line())
ThreeYearRollingPeak <- ScotsBayPeakBiomass %>%
arrange(Year) %>%
group_by(Year) %>%
mutate(avg_biomass3 =rollmean(DFO_Estimate, k=3, fill = NA, align = 'right'))
ThreeYearRollingPeakGraph <- print(ggplot(ThreeYearRollingPeak, aes(x=Year, y=avg_biomass3)) +
geom_point()+
geom_line())
CombinedPlot3 <- merge(ThreeYearRollingBiomass, ThreeYearRollingPeak, by="Year")
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, colour = "Scots Bay Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, colour = "Scots Bay Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
TotalBiomass <- subset(Survey_Factors, select = c("id", "Year","Ground", "DFO_Estimate", "Survey_Date"))
TotalBiomass <- na.omit(TotalBiomass)
TotalBiomass <- subset(TotalBiomass, Survey_Date < '2023-05-22')
GermanBankTotalBiomass <- subset(TotalBiomass, Ground == "GB")
GermanBankTotalBiomass <- GermanBankTotalBiomass %>% group_by(Year) %>% add_count(Year)
aggregateGB <- aggregate(GermanBankTotalBiomass$DFO_Estimate, list(GermanBankTotalBiomass$Year), FUN=(sum))
colnames(aggregateGB)<-c("Year", "DFO_Estimate")
GBTotalBiomass <- print(ggplot(aggregateGB, aes(x=Year, y=DFO_Estimate, col = "Yearly Total Biomass")) +
geom_point(aes(size = 2)) +
geom_line()+
labs(x = "Year", y= "Total Biomass (mt)"))
PeakBiomass <- subset(Survey_Factors, select = c("Survey_Date", "Year","Ground", "DFO_Estimate"))
PeakBiomass <- na.omit(PeakBiomass)
PeakBiomass <- subset(PeakBiomass, Survey_Date < '2023-05-22')
GermanBankPeakBiomass <- subset(PeakBiomass, Ground == "GB")
GermanBankPeakBiomass <- GermanBankPeakBiomass %>% group_by(Year) %>% slice_max(DFO_Estimate)
GermanBankPeakBiomassGraph2 <- ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate, col = "Yearly Peak Biomass")) +
geom_point()+
geom_line()
labs(x="Year", y="Peak Biomass (mt)")
GermanBankPeakBiomassPointGraph <- ggplot(GermanBankPeakBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line()+
legend(2000, 500000, legend= c("German Bank Peak Biomass"))
CombinedPlot <- merge(aggregateGB, GermanBankPeakBiomass, by="Year" )
CombinedPlot2 <- print(ggplot(CombinedPlot, aes(x=Year)) +
geom_line(aes(y=DFO_Estimate.x, color = "German Bank Total Yearly Biomass")) +
geom_line(aes(y=DFO_Estimate.y, color = "German Bank Peak Biomass")) +
#geom_line(aes(y=avg_biomass3, color="German Bank Three Year Rolling Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
ThreeYearRollingBiomass <- aggregateGB %>%
arrange(Year) %>%
group_by(Year) %>%
mutate(avg_biomass3 = rollmean(DFO_Estimate, k = 3, fill = NA, align = 'right'))
ThreeYearRollingBiomassGraph <- print(ggplot(ThreeYearRollingBiomass, aes(x=Year, y=DFO_Estimate)) +
geom_point() +
geom_line())
ThreeYearRollingPeak <- GermanBankPeakBiomass %>%
arrange(Year) %>%
group_by(Year) %>%
mutate(avg_biomass3 =rollmean(DFO_Estimate, k=3, fill = NA, align = 'right'))
ThreeYearRollingPeakGraph <- print(ggplot(ThreeYearRollingPeak, aes(x=Year, y=avg_biomass3)) +
geom_point()+
geom_line())
CombinedPlot3 <- merge(ThreeYearRollingBiomass, ThreeYearRollingPeak, by="Year")
CombinedPlot4 <- print(ggplot(CombinedPlot3, aes(x=Year))+
geom_line(aes(y=avg_biomass3.x, colour = "German Bank Three Year rolling Average Yearly Biomass")) +
geom_line(aes(y=avg_biomass3.y, colour = "German Bank Three Year rolling Average Peak Biomass")) +
labs(x = "Year", y = "Total Biomass (mt)"))
